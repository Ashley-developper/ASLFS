
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CITY FLIGHT SIMULATOR</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; justify-content: center; align-items: center; min-height: 100vh; color: #333; }
        .container { width: 100%; height: 100vh; display: flex; flex-direction: column; }
        .menu-screen { width: 100%; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); z-index: 100; position: absolute; top: 0; left: 0; }
        .menu-screen.hidden { display: none; }
        .menu-content { text-align: center; background: rgba(255, 255, 255, 0.95); padding: 60px 80px; border-radius: 20px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); max-width: 600px; }
        .title { font-size: 48px; font-weight: bold; color: #667eea; margin-bottom: 30px; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1); }
        .subtitle { font-size: 20px; color: #764ba2; margin-bottom: 40px; }
        .plane-selection { margin: 30px 0; }
        .plane-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 30px 0; }
        .plane-btn { padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; transition: all 0.3s ease; }
        .plane-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4); }
        .plane-btn:active { transform: translateY(-1px); }
        .difficulty-selection { margin: 30px 0; }
        .difficulty-options { display: flex; gap: 15px; justify-content: center; margin-top: 15px; }
        .difficulty-btn { padding: 12px 25px; background: #f0f0f0; color: #333; border: 2px solid #667eea; border-radius: 8px; font-size: 14px; font-weight: bold; cursor: pointer; transition: all 0.3s ease; }
        .difficulty-btn.selected { background: #667eea; color: white; }
        .difficulty-btn:hover { background: #667eea; color: white; }
        .start-btn { padding: 15px 50px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 10px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 30px; transition: all 0.3s ease; }
        .start-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4); }
        .loading-bar { width: 300px; height: 8px; background: #e0e0e0; border-radius: 10px; overflow: hidden; margin: 20px 0; }
        .loading-progress { height: 100%; background: linear-gradient(90deg, #667eea 0%, #764ba2 100%); width: 0%; transition: width 0.3s ease; }
        .loading-text { font-size: 16px; color: #667eea; margin-top: 15px; }
        #gameContainer { width: 100%; height: 100%; position: relative; display: none; }
        #gameContainer.active { display: block; }
        .hud { position: absolute; top: 20px; left: 20px; color: #00ff00; font-family: 'Courier New', monospace; font-size: 14px; background: rgba(0, 0, 0, 0.7); padding: 15px; border-radius: 5px; border: 2px solid #00ff00; z-index: 10; min-width: 250px; }
        .hud-item { margin: 8px 0; text-shadow: 0 0 5px rgba(0, 255, 0, 0.8); }
        .controls-info { position: absolute; bottom: 20px; left: 20px; color: #00ff00; font-family: 'Courier New', monospace; font-size: 12px; background: rgba(0, 0, 0, 0.7); padding: 15px; border-radius: 5px; border: 2px solid #00ff00; z-index: 10; }
        .control-line { margin: 5px 0; text-shadow: 0 0 5px rgba(0, 255, 0, 0.8); }
        .radar { position: absolute; bottom: 20px; right: 20px; width: 150px; height: 150px; background: rgba(0, 0, 0, 0.7); border: 2px solid #00ff00; border-radius: 50%; z-index: 10; }
        #radarCanvas { width: 100%; height: 100%; }
        .menu-link { position: absolute; bottom: 20px; right: 20px; z-index: 20; }
        .menu-btn { padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 5px; font-size: 14px; cursor: pointer; transition: all 0.3s ease; }
        .menu-btn:hover { background: #764ba2; transform: scale(1.05); }
        .stats { position: absolute; top: 20px; right: 20px; color: #00ff00; font-family: 'Courier New', monospace; font-size: 14px; background: rgba(0, 0, 0, 0.7); padding: 15px; border-radius: 5px; border: 2px solid #00ff00; z-index: 10; min-width: 250px; }
        .stat-item { margin: 8px 0; text-shadow: 0 0 5px rgba(0, 255, 0, 0.8); }
        .city-info { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 24px; font-weight: bold; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8); background: rgba(0, 0, 0, 0.5); padding: 20px 40px; border-radius: 10px; opacity: 0; transition: opacity 0.5s ease; pointer-events: none; z-index: 5; }
        .city-info.show { opacity: 1; }
        @keyframes pulse { 0%, 100% { text-shadow: 0 0 5px rgba(0, 255, 0, 0.8); } 50% { text-shadow: 0 0 15px rgba(0, 255, 0, 1); } }
        .pulse { animation: pulse 1s infinite; }
    </style>
</head>
<body>
    <div class="container">
        <div class="menu-screen" id="menuScreen">
            <div class="menu-content">
                <div class="title">‚úàÔ∏è CITY FLIGHT SIMULATOR</div>
                <div class="subtitle">CHOOSE YOUR PLANE & START YOUR CITY FLIGHT</div>
                <div class="plane-selection">
                    <label style="font-size: 16px; font-weight: bold; color: #333;">Select Aircraft:</label>
                    <div class="plane-grid">
                        <button class="plane-btn" onclick="selectPlane('F-16')">üõ©Ô∏è F-16 Fighter</button>
                        <button class="plane-btn" onclick="selectPlane('Boeing747')">‚úàÔ∏è Boeing 747</button>
                        <button class="plane-btn" onclick="selectPlane('Helicopter')">üöÅ Helicopter</button>
                        <button class="plane-btn" onclick="selectPlane('Drone')">üõ∏ Drone</button>
                    </div>
                </div>
                <div class="difficulty-selection">
                    <label style="font-size: 16px; font-weight: bold; color: #333;">Difficulty Level:</label>
                    <div class="difficulty-options">
                        <button class="difficulty-btn selected" onclick="selectDifficulty('Easy')">EASY</button>
                        <button class="difficulty-btn" onclick="selectDifficulty('Normal')">NORMAL</button>
                        <button class="difficulty-btn" onclick="selectDifficulty('Hard')">HARD</button>
                    </div>
                </div>
                <div class="loading-bar" id="loadingBar">
                    <div class="loading-progress" id="loadingProgress"></div>
                </div>
                <div class="loading-text" id="loadingText">(0%) Loading Assets...</div>
                <button class="start-btn" onclick="startGame()">START FLIGHT</button>
                <div style="margin-top: 30px; color: #999; font-size: 12px;">
                    <p>Future Cities: New maps, landmarks, and challenge missions coming soon!</p>
                    <p style="margin-top: 10px;">Configure graphics, controls, and sound options when settings are implemented.</p>
                    <p style="margin-top: 10px; color: #667eea; font-weight: bold;">MADE BY ZHANYI ZHOU & ASHLEY INC.</p>
                </div>
            </div>
        </div>
        <div id="gameContainer">
            <div class="hud" id="hud">
                <div class="hud-item"><strong>CITY FLIGHT HUD</strong></div>
                <div class="hud-item">Aircraft: <span id="hudPlane">F-16</span></div>
                <div class="hud-item">Altitude: <span id="hudAltitude">0</span> m</div>
                <div class="hud-item">Speed: <span id="hudSpeed">0</span> km/h</div>
                <div class="hud-item">Heading: <span id="hudHeading">0</span>¬∞</div>
                <div class="hud-item">Fuel: <span id="hudFuel">100</span>%</div>
            </div>
            <div class="stats" id="stats">
                <div class="stat-item"><strong>FLIGHT STATS</strong></div>
                <div class="stat-item">Max Altitude: <span id="maxAltitude">0</span> m</div>
                <div class="stat-item">Max Speed: <span id="maxSpeed">0</span> km/h</div>
                <div class="stat-item">Flight Time: <span id="flightTime">0</span> s</div>
                <div class="stat-item">Distance: <span id="distance">0</span> km</div>
            </div>
            <div class="radar" id="radar">
                <canvas id="radarCanvas"></canvas>
            </div>
            <div class="controls-info">
                <div class="control-line"><strong>CONTROLS:</strong></div>
                <div class="control-line">W/‚Üë = Pitch Up | S/‚Üì = Pitch Down</div>
                <div class="control-line">A/‚Üê = Roll Left | D/‚Üí = Roll Right</div>
                <div class="control-line">Q = Yaw Left | E = Yaw Right</div>
                <div class="control-line">SPACE = Increase Speed | CTRL = Decrease</div>
                <div class="control-line">ESC = Return to Menu</div>
            </div>
            <div class="city-info" id="cityInfo">Welcome to City Flight Mode!</div>
            <div class="menu-link">
                <button class="menu-btn" onclick="returnToMenu()">Return to Menu</button>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let selectedPlane = 'F-16';
        let selectedDifficulty = 'Easy';
        let gameRunning = false;
        let scene, camera, renderer;
        let plane, cityEnvironment = {};
        let controls = {};
        let gameStats = { flightTime: 0, maxAltitude: 0, maxSpeed: 0, distance: 0, lastPos: new THREE.Vector3(0, 0, 0) };
        const planeSpecs = { 'F-16': { maxSpeed: 2100, maxAltitude: 15000, acceleration: 3.5, mass: 1.6 }, 'Boeing747': { maxSpeed: 988, maxAltitude: 13100, acceleration: 1.5, mass: 4.4 }, 'Helicopter': { maxSpeed: 320, maxAltitude: 6100, acceleration: 2.0, mass: 2.3 }, 'Drone': { maxSpeed: 100, maxAltitude: 500, acceleration: 1.2, mass: 0.05 } };
        const difficultyModifiers = { 'Easy': { gravityScale: 0.3, dragScale: 0.5, windScale: 0.0 }, 'Normal': { gravityScale: 0.8, dragScale: 1.0, windScale: 0.3 }, 'Hard': { gravityScale: 1.2, dragScale: 1.5, windScale: 0.8 } };
        function selectPlane(plane) { selectedPlane = plane; document.querySelectorAll('.plane-btn').forEach(btn => { btn.style.opacity = btn.textContent.includes(plane) ? '1' : '0.6'; }); console.log('Selected plane: ' + selectedPlane); }
        function selectDifficulty(difficulty) { selectedDifficulty = difficulty; document.querySelectorAll('.difficulty-btn').forEach(btn => { if (btn.textContent.includes(difficulty)) { btn.classList.add('selected'); } else { btn.classList.remove('selected'); } }); console.log('Selected difficulty: ' + selectedDifficulty); }
        function startGame() { const loadingText = document.getElementById('loadingText'); const loadingProgress = document.getElementById('loadingProgress'); let progress = 0; const loadingInterval = setInterval(() => { progress += Math.random() * 20; if (progress > 100) progress = 100; loadingProgress.style.width = progress + '%'; loadingText.textContent = '(' + Math.floor(progress) + '%) Loading Assets...'; if (progress >= 100) { clearInterval(loadingInterval); setTimeout(() => { document.getElementById('menuScreen').classList.add('hidden'); document.getElementById('gameContainer').classList.add('active'); gameRunning = true; initializeGame(); animate(); }, 500); } }, 100); }
        function returnToMenu() { gameRunning = false; document.getElementById('menuScreen').classList.remove('hidden'); document.getElementById('gameContainer').classList.remove('active'); if (renderer) { renderer.dispose(); renderer.domElement.remove(); renderer = null; } document.getElementById('loadingProgress').style.width = '0%'; document.getElementById('loadingText').textContent = '(0%) Loading Assets...'; }
        function initializeGame() { scene = new THREE.Scene(); scene.background = new THREE.Color(0x87ceeb); scene.fog = new THREE.Fog(0x87ceeb, 3000, 8000); camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 10000); camera.position.set(0, 500, 1000); camera.lookAt(0, 100, 0); renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true }); renderer.setSize(window.innerWidth, window.innerHeight); renderer.shadowMap.enabled = true; renderer.shadowMap.type = THREE.PCFShadowShadowMap; document.getElementById('gameContainer').appendChild(renderer.domElement); const ambientLight = new THREE.AmbientLight(0xffffff, 0.6); scene.add(ambientLight); const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8); directionalLight.position.set(1000, 1000, 1000); directionalLight.castShadow = true; directionalLight.shadow.mapSize.width = 2048; directionalLight.shadow.mapSize.height = 2048; directionalLight.shadow.camera.left = -2000; directionalLight.shadow.camera.right = 2000; directionalLight.shadow.camera.top = 2000; directionalLight.shadow.camera.bottom = -2000; scene.add(directionalLight); createCityEnvironment(); createPlane(); initControls(); initRadar(); showCityInfo('Flying over ' + selectedPlane + ' in ' + selectedDifficulty + ' Mode'); window.addEventListener('resize', onWindowResize); console.log('Game initialized with plane: ' + selectedPlane + ', difficulty: ' + selectedDifficulty); }
        function createCityEnvironment() { const groundGeometry = new THREE.PlaneGeometry(5000, 5000); const groundMaterial = new THREE.MeshLambertMaterial({ color: 0x228b22 }); const groundMesh = new THREE.Mesh(groundGeometry, groundMaterial); groundMesh.rotation.x = -Math.PI / 2; groundMesh.receiveShadow = true; scene.add(groundMesh); cityEnvironment.ground = groundMesh; const skyGeometry = new THREE.SphereGeometry(10000, 32, 32); const skyMaterial = new THREE.MeshBasicMaterial({ color: 0x87ceeb, side: THREE.BackSide }); const sky = new THREE.Mesh(skyGeometry, skyMaterial); scene.add(sky); cityEnvironment.sky = sky; createBuildings(); createRoads(); createLandmarks(); console.log('City environment created successfully'); }
        function createBuildings() { const buildingColors = [0xff6b6b, 0x4ecdc4, 0x45b7d1, 0xf7b731, 0x5f27cd, 0x00d2d3, 0xff9ff3, 0x54a0ff]; let buildingCount = 0; for (let x = -2000; x <= 2000; x += 400) { for (let z = -2000; z <= 2000; z += 400) { if (Math.random() > 0.7) continue; const width = 80 + Math.random() * 120; const depth = 80 + Math.random() * 120; const height = 150 + Math.random() * 350; const buildingGeometry = new THREE.BoxGeometry(width, height, depth); const buildingColor = buildingColors[Math.floor(Math.random() * buildingColors.length)]; const buildingMaterial = new THREE.MeshPhongMaterial({ color: buildingColor }); const building = new THREE.Mesh(buildingGeometry, buildingMaterial); building.position.set(x + (Math.random() * 100 - 50), height / 2, z + (Math.random() * 100 - 50)); building.castShadow = true; building.receiveShadow = true; const windowGeometry = new THREE.BoxGeometry(width * 0.9, height * 0.9, depth * 0.1); const windowMaterial = new THREE.MeshPhongMaterial({ color: 0xffff00, emissive: 0xffff00 }); const windowMesh = new THREE.Mesh(windowGeometry, windowMaterial); windowMesh.position.z = (depth / 2) + 5; building.add(windowMesh); scene.add(building); buildingCount++; } } cityEnvironment.buildings = buildingCount; console.log('Created ' + buildingCount + ' buildings'); }
        function createRoads() { const roadMaterial = new THREE.MeshPhongMaterial({ color: 0x333333 }); const road1Geometry = new THREE.PlaneGeometry(5000, 200); const road1 = new THREE.Mesh(road1Geometry, roadMaterial); road1.rotation.x = -Math.PI / 2; road1.position.z = 0; road1.position.y = 0.1; road1.receiveShadow = true; scene.add(road1); const road2Geometry = new THREE.PlaneGeometry(200, 5000); const road2 = new THREE.Mesh(road2Geometry, roadMaterial); road2.rotation.x = -Math.PI / 2; road2.position.x = 0; road2.position.y = 0.1; road2.receiveShadow = true; scene.add(road2); console.log('Created city roads'); }
        function createLandmarks() { const towerGeometry = new THREE.CylinderGeometry(100, 150, 800, 32); const towerMaterial = new THREE.MeshPhongMaterial({ color: 0xff6347 }); const tower = new THREE.Mesh(towerGeometry, towerMaterial); tower.position.set(0, 400, 0); tower.castShadow = true; tower.receiveShadow = true; scene.add(tower); cityEnvironment.tower = tower; const sphereGeometry = new THREE.SphereGeometry(80, 32, 32); const sphereMaterial = new THREE.MeshPhongMaterial({ color: 0x00ff00, emissive: 0x00ff00 }); const landmark1 = new THREE.Mesh(sphereGeometry, sphereMaterial); landmark1.position.set(-1500, 100, -1500); landmark1.castShadow = true; scene.add(landmark1); const landmark2 = new THREE.Mesh(sphereGeometry, sphereMaterial); landmark2.position.set(1500, 100, 1500); landmark2.castShadow = true; scene.add(landmark2); console.log('Created city landmarks'); }
        function createPlane() { plane = new THREE.Group(); const fuselageGeometry = new THREE.CylinderGeometry(15, 12, 80, 32); const fuselageMaterial = new THREE.MeshPhongMaterial({ color: 0x1e90ff }); const fuselage = new THREE.Mesh(fuselageGeometry, fuselageMaterial); fuselage.castShadow = true; plane.add(fuselage); const cockpitGeometry = new THREE.SphereGeometry(10, 16, 16); const cockpitMaterial = new THREE.MeshPhongMaterial({ color: 0x000000 }); const cockpit = new THREE.Mesh(cockpitGeometry, cockpitMaterial); cockpit.position.z = 35; cockpit.castShadow = true; plane.add(cockpit); const wingGeometry = new THREE.BoxGeometry(120, 8, 30); const wingMaterial = new THREE.MeshPhongMaterial({ color: 0x1e90ff }); const wing = new THREE.Mesh(wingGeometry, wingMaterial); wing.castShadow = true; plane.add(wing); const tailWingGeometry = new THREE.BoxGeometry(40, 8, 30); const tailWing = new THREE.Mesh(tailWingGeometry, wingMaterial); tailWing.position.z = -30; tailWing.castShadow = true; plane.add(tailWing); const stabilizerGeometry = new THREE.BoxGeometry(8, 40, 15); const stabilizer = new THREE.Mesh(stabilizerGeometry, wingMaterial); stabilizer.position.set(0, 20, -25); stabilizer.castShadow = true; plane.add(stabilizer); plane.position.set(0, 500, 1000); plane.scale.set(1, 1, 1); plane.velocity = new THREE.Vector3(0, 0, 0); plane.rotation.order = 'YXZ'; plane.pitch = 0; plane.roll = 0; plane.yaw = 0; plane.speed = 0; scene.add(plane); console.log('Plane created: ' + selectedPlane); }
        function initControls() { controls = { pitchUp: false, pitchDown: false, rollLeft: false, rollRight: false, yawLeft: false, yawRight: false, speedUp: false, speedDown: false }; window.addEventListener('keydown', onKeyDown); window.addEventListener('keyup', onKeyUp); document.addEventListener('keydown', (e) => { if (e.key === 'Escape') { returnToMenu(); } }); }
        function onKeyDown(e) { const key = e.key.toUpperCase(); if (key === 'W' || e.code === 'ArrowUp') controls.pitchUp = true; if (key === 'S' || e.code === 'ArrowDown') controls.pitchDown = true; if (key === 'A' || e.code === 'ArrowLeft') controls.rollLeft = true; if (key === 'D' || e.code === 'ArrowRight') controls.rollRight = true; if (key === 'Q') controls.yawLeft = true; if (key === 'E') controls.yawRight = true; if (e.code === 'Space') controls.speedUp = true; if (e.code === 'ControlLeft') controls.speedDown = true; }
        function onKeyUp(e) { const key = e.key.toUpperCase(); if (key === 'W' || e.code === 'ArrowUp') controls.pitchUp = false; if (key === 'S' || e.code === 'ArrowDown') controls.pitchDown = false; if (key === 'A' || e.code === 'ArrowLeft') controls.rollLeft = false; if (key === 'D' || e.code === 'ArrowRight') controls.rollRight = false; if (key === 'Q') controls.yawLeft = false; if (key === 'E') controls.yawRight = false; if (e.code === 'Space') controls.speedUp = false; if (e.code === 'ControlLeft') controls.speedDown = false; }
        function updatePlanePhysics() { const specs = planeSpecs[selectedPlane]; const modifier = difficultyModifiers[selectedDifficulty]; if (controls.speedUp) { plane.speed = Math.min(plane.speed + specs.acceleration, specs.maxSpeed); } if (controls.speedDown) { plane.speed = Math.max(plane.speed - specs.acceleration * 0.5, 0); } plane.speed *= 0.99; const maxPitch = Math.PI / 3; if (controls.pitchUp) { plane.pitch = Math.min(plane.pitch + 0.05, maxPitch); } if (controls.pitchDown) { plane.pitch = Math.max(plane.pitch - 0.05, -maxPitch); } plane.pitch *= 0.95; const maxRoll = Math.PI / 2; if (controls.rollLeft) { plane.roll = Math.min(plane.roll + 0.05, maxRoll); } if (controls.rollRight) { plane.roll = Math.max(plane.roll - 0.05, -maxRoll); } plane.roll *= 0.95; if (controls.yawLeft) { plane.yaw += 0.03; } if (controls.yawRight) { plane.yaw -= 0.03; } plane.rotation.x = plane.pitch; plane.rotation.z = plane.roll; plane.rotation.y = plane.yaw; const forward = new THREE.Vector3(0, 0, -1); forward.applyQuaternion(plane.quaternion); const moveSpeed = plane.speed / 100; plane.velocity.copy(forward).multiplyScalar(moveSpeed); plane.velocity.y -= 9.81 * modifier.gravityScale * 0.016; plane.velocity.multiplyScalar(1 - (0.01 * modifier.dragScale)); plane.position.add(plane.velocity); if (plane.position.y > planeSpecs[selectedPlane].maxAltitude) { plane.position.y = planeSpecs[selectedPlane].maxAltitude; plane.velocity.y = 0; } if (plane.position.y < 50) { plane.position.y = 50; plane.velocity.y = 0; plane.speed *= 0.5; } const cameraDistance = 150 + plane.speed / 10; const cameraHeight = 80; const cameraOffsetZ = cameraDistance; const cameraOffset = new THREE.Vector3(0, cameraHeight, cameraOffsetZ); cameraOffset.applyQuaternion(plane.quaternion); camera.position.lerp(plane.position.clone().add(cameraOffset), 0.1); camera.lookAt(plane.position.clone().add(forward.multiplyScalar(200))); }
        function updateHUD() { const altitude = Math.max(0, plane.position.y - 50); const speed = plane.speed; const heading = (plane.yaw * 180 / Math.PI) % 360; const fuel = Math.max(0, 100 - (gameStats.flightTime / 60)); document.getElementById('hudPlane').textContent = selectedPlane; document.getElementById('hudAltitude').textContent = Math.floor(altitude); document.getElementById('hudSpeed').textContent = Math.floor(speed); document.getElementById('hudHeading').textContent = Math.floor(heading); document.getElementById('hudFuel').textContent = Math.floor(fuel); gameStats.maxAltitude = Math.max(gameStats.maxAltitude, altitude); gameStats.maxSpeed = Math.max(gameStats.maxSpeed, speed); const distanceFromLast = plane.position.distanceTo(gameStats.lastPos); gameStats.distance += distanceFromLast / 1000000; gameStats.lastPos.copy(plane.position); document.getElementById('maxAltitude').textContent = Math.floor(gameStats.maxAltitude); document.getElementById('maxSpeed').textContent = Math.floor(gameStats.maxSpeed); document.getElementById('flightTime').textContent = Math.floor(gameStats.flightTime); document.getElementById('distance').textContent = Math.floor(gameStats.distance); }
        function updateRadar() { const canvas = document.getElementById('radarCanvas'); const ctx = canvas.getContext('2d'); ctx.fillStyle = '#000000'; ctx.fillRect(0, 0, canvas.width, canvas.height); ctx.strokeStyle = '#00ff00'; ctx.lineWidth = 1; ctx.beginPath(); ctx.arc(canvas.width / 2, canvas.height / 2, canvas.width / 2 - 5, 0, Math.PI * 2); ctx.stroke(); ctx.beginPath(); ctx.arc(canvas.width / 2, canvas.height / 2, canvas.width / 4, 0, Math.PI * 2); ctx.stroke(); ctx.fillStyle = '#00ff00'; ctx.beginPath(); ctx.arc(canvas.width / 2, canvas.height / 2, 3, 0, Math.PI * 2); ctx.fill(); }
        function initRadar() { const canvas = document.getElementById('radarCanvas'); canvas.width = 150; canvas.height = 150; updateRadar(); }
        function showCityInfo(message) { const cityInfo = document.getElementById('cityInfo'); cityInfo.textContent = message; cityInfo.classList.add('show'); setTimeout(() => { cityInfo.classList.remove('show'); }, 3000); }
        function onWindowResize() { if (!renderer) return; camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); }
        function animate() { requestAnimationFrame(animate); if (!gameRunning) return; updatePlanePhysics(); updateHUD(); updateRadar(); gameStats.flightTime++; renderer.render(scene, camera); }
        selectPlane('F-16');
        selectDifficulty('Easy');
    </script>
</body>
</html>
